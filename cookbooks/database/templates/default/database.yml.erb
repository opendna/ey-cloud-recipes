#
# This file should be in .../cookbooks/database/templates/default/database.yml.erb
#
 
<%= @environment %>:
  adapter:   <%= @adapter %>
  database:  <%= @database %>
  username:  <%= @username %>
  password:  <%= @password %>
  host:      <%= @host %>
  reconnect: true
 
# This produces a block for each slave, named "slave", "slave_1", "slave_2", etc.
<% @slaves.each_with_index do |slave,i| %>
<%= i == 0 ? "slave" : "slave_#{i}" %>:
  slavename: <%= slave["name"].nil? ? "---" : "'"+slave["name"]+"'" %>
  adapter:   <%= @adapter %>
  database:  '<%= @dbname %>'
  username:  '<%= @dbuser %>'
  password:  '<%= @dbpass %>'
  host:      '<%= slave['private_hostname'] %>'
  reconnect: true
<% end %>